{"version":3,"file":"package-starter.js","sources":["../../../Client/src/entrypoints/manifest.ts","../../../Client/src/modals/manifest.ts","../../../Client/src/modals/modal-token.ts","../../../Client/src/entityactions/member.entity.action.ts","../../../Client/src/entityactions/manifest.ts","../../../Client/src/bundle.manifests.ts"],"sourcesContent":["export const manifests: Array<UmbExtensionManifest> = [\r\n  {\r\n    name: \"Package Starter Entrypoint\",\r\n    alias: \"PackageStarter.Entrypoint\",\r\n    type: \"backofficeEntryPoint\",\r\n    js: () => import(\"./entrypoint.js\"),\r\n  },\r\n];\r\n","\nconst modals = [\n  {\n    type: 'modal',\n    alias: 'member.custom.modal',\n    name: 'Member custom modal',\n    js: () => import('./modal-element.js')\n  }\n];\n\nexport const manifests = [...modals];\n","import { UmbModalToken } from \"@umbraco-cms/backoffice/modal\";\n\nexport interface MemberCustomModalData {\n  headline: string;\n  content: string;\n}\n\nexport interface MemberCustomModalValue {\n  content: string\n}\n\nexport const MEMBER_CUSTOM_MODAL = new UmbModalToken<MemberCustomModalData, MemberCustomModalValue>(\n  \"member.custom.modal\",\n  {\n    modal: {\n      type: 'sidebar',\n      size: 'medium'\n    }\n  }\n);\n","import { UmbControllerHostElement } from \"@umbraco-cms/backoffice/controller-api\";\nimport { UmbEntityActionArgs, UmbEntityActionBase } from \"@umbraco-cms/backoffice/entity-action\";\nimport { UMB_MODAL_MANAGER_CONTEXT, UmbModalManagerContext } from \"@umbraco-cms/backoffice/modal\";\nimport { MEMBER_CUSTOM_MODAL } from \"../modals/modal-token.ts\";\nimport { UmbMemberDetailRepository  } from '@umbraco-cms/backoffice/member';\n\nexport class ImpersonateMember extends UmbEntityActionBase<UmbMemberDetailRepository> {\n  #modalManagerContext?: UmbModalManagerContext;\n  constructor(host: UmbControllerHostElement, args: UmbEntityActionArgs<UmbMemberDetailRepository>)\n  {\n    super(host, args)\n    // Fetch/consume the contexts & assign to the private fields\n    this.consumeContext(UMB_MODAL_MANAGER_CONTEXT, (instance) => {\n      this.#modalManagerContext = instance;\n    });\n  }\n\n  async execute() {\n    console.log(\"ImpersonateMember.execute\", this.args);\n    //The modal does NOT return any data when closed (it does not submit)\n    const modal = this.#modalManagerContext?.open(this, MEMBER_CUSTOM_MODAL, {\n      data: {\n        headline:'Impersonate',\n        content: 'Do you want to impersonate this user?' + this.args.unique\n      }\n    });\n\n    await modal?.onSubmit().then(() => {\n      const headers: Headers = new Headers()\n      headers.set('Content-Type', 'application/json')\n      headers.set('Accept', 'application/json')\n      const request: RequestInfo = new Request('/sendvalidation/' + this.args.unique?.toString(), {\n        method: 'GET',\n        headers: headers,\n      })\n      // Send the request and print the response\n      return fetch(request)\n        .then(res => {\n          console.log(\"got response:\", res)\n        })\n    }).catch(() => {\n      return;\n    });\n  }\n}\n","//import the entity type for Member\r\nimport { UMB_MEMBER_ENTITY_TYPE } from \"@umbraco-cms/backoffice/member\";\r\n//import our entity action definition\r\nimport { ImpersonateMember } from \"./member.entity.action\";\r\n\r\nconst entityAction = {\r\n  type: 'entityAction',\r\n  kind: 'default',\r\n  alias: 'member.entity.action',\r\n  name: 'member action',\r\n  weight: -1,\r\n  forEntityTypes: [\r\n    UMB_MEMBER_ENTITY_TYPE\r\n  ],\r\n  api: ImpersonateMember,\r\n  meta: {\r\n    icon: 'icon-operator',\r\n    label: 'Impersonate Member',\r\n  },\r\n  conditions: [{\r\n    alias: \"Umb.Condition.SectionAlias\",\r\n    match: \"Umb.Section.Members\"\r\n  }]\r\n}\r\n\r\nexport const manifests = [entityAction];\r\n","import { manifests as entrypoints } from \"./entrypoints/manifest.js\";\r\nimport { manifests as modals } from \"./modals/manifest.js\";\r\nimport { manifests as entityActions } from \"./entityactions/manifest.js\";\r\n\r\n// Job of the bundle is to collate all the manifests from different parts of the extension and load other manifests\r\n// We load this bundle from umbraco-package.json\r\nexport const manifests: Array<UmbExtensionManifest> = [\r\n  ...entrypoints,\r\n  ...modals,\r\n  ...entityActions\r\n];\r\n"],"names":["manifests","modals","MEMBER_CUSTOM_MODAL","UmbModalToken","ImpersonateMember","UmbEntityActionBase","host","args","__privateAdd","_modalManagerContext","UMB_MODAL_MANAGER_CONTEXT","instance","__privateSet","modal","_a","__privateGet","headers","request","res","entityAction","UMB_MEMBER_ENTITY_TYPE","entrypoints","entityActions"],"mappings":";;;;;;;;AAAO,MAAMA,IAAyC;AAAA,EACpD;AAAA,IACE,MAAM;AAAA,IACN,OAAO;AAAA,IACP,MAAM;AAAA,IACN,IAAI,MAAM,OAAO,0BAAiB;AAAA,EAAA;AAEtC,GCNMC,IAAS;AAAA,EACb;AAAA,IACE,MAAM;AAAA,IACN,OAAO;AAAA,IACP,MAAM;AAAA,IACN,IAAI,MAAM,OAAO,6BAAoB;AAAA,EAAA;AAEzC,GAEaD,IAAY,CAAC,GAAGC,CAAM,GCCtBC,IAAsB,IAAIC;AAAA,EACrC;AAAA,EACA;AAAA,IACE,OAAO;AAAA,MACL,MAAM;AAAA,MACN,MAAM;AAAA,IAAA;AAAA,EACR;AAEJ;;ACbO,MAAMC,UAA0BC,EAA+C;AAAA,EAEpF,YAAYC,GAAgCC,GAC5C;AACE,UAAMD,GAAMC,CAAI;AAHlB,IAAAC,EAAA,MAAAC;AAKE,SAAK,eAAeC,GAA2B,CAACC,MAAa;AAC3D,MAAAC,EAAA,MAAKH,GAAuBE;AAAA,IAAA,CAC7B;AAAA,EAAA;AAAA,EAGH,MAAM,UAAU;;AACd,YAAQ,IAAI,6BAA6B,KAAK,IAAI;AAElD,UAAME,KAAQC,IAAAC,EAAA,MAAKN,OAAL,gBAAAK,EAA2B,KAAK,MAAMZ,GAAqB;AAAA,MACvE,MAAM;AAAA,QACJ,UAAS;AAAA,QACT,SAAS,0CAA0C,KAAK,KAAK;AAAA,MAAA;AAAA,IAC/D;AAGF,WAAMW,KAAA,gBAAAA,EAAO,WAAW,KAAK,MAAM;;AACjC,YAAMG,IAAmB,IAAI,QAAA;AAC7B,MAAAA,EAAQ,IAAI,gBAAgB,kBAAkB,GAC9CA,EAAQ,IAAI,UAAU,kBAAkB;AACxC,YAAMC,IAAuB,IAAI,QAAQ,uBAAqBH,IAAA,KAAK,KAAK,WAAV,gBAAAA,EAAkB,aAAY;AAAA,QAC1F,QAAQ;AAAA,QACR,SAAAE;AAAA,MAAA,CACD;AAED,aAAO,MAAMC,CAAO,EACjB,KAAK,CAAAC,MAAO;AACX,gBAAQ,IAAI,iBAAiBA,CAAG;AAAA,MAAA,CACjC;AAAA,IAAA,GACF,MAAM,MAAM;AAAA,IACb;AAAA,EACD;AAEL;AArCET,IAAA;ACFF,MAAMU,IAAe;AAAA,EACnB,MAAM;AAAA,EACN,MAAM;AAAA,EACN,OAAO;AAAA,EACP,MAAM;AAAA,EACN,QAAQ;AAAA,EACR,gBAAgB;AAAA,IACdC;AAAA,EAAA;AAAA,EAEF,KAAKhB;AAAA,EACL,MAAM;AAAA,IACJ,MAAM;AAAA,IACN,OAAO;AAAA,EAAA;AAAA,EAET,YAAY,CAAC;AAAA,IACX,OAAO;AAAA,IACP,OAAO;AAAA,EAAA,CACR;AACH,GAEaJ,IAAY,CAACmB,CAAY,GCnBzBnB,IAAyC;AAAA,EACpD,GAAGqB;AAAAA,EACH,GAAGpB;AAAAA,EACH,GAAGqB;AACL;"}