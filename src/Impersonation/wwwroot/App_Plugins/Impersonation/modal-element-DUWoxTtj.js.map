{"version":3,"file":"modal-element-DUWoxTtj.js","sources":["../../../Client/src/modals/modal-helpers.ts","../../../Client/src/modals/modal-element.ts"],"sourcesContent":["import {RootDomains, UUISelectOption} from \"../types/types.ts\";\n\nexport function MapRootDomainsToOptions(items: RootDomains[]): UUISelectOption[] {\n  const selectOptions: UUISelectOption[] = [];\n  for (const item of items) {\n    const documentName = item.variants[0]?.name;\n    if (!item.domains?.domains || item.domains.domains.length == 0) {\n      selectOptions.push({name: documentName, value: '/', selected: false});\n    } else {\n      for (const domain of item.domains.domains) {\n        selectOptions.push({name: domain.domainName, value: domain.domainName, selected: false, group: documentName});\n      }\n    }\n  }\n  if (selectOptions[0]) {\n    selectOptions[0].selected = true;\n  }\n\n  return selectOptions;\n}\n","import {customElement, html, state} from \"@umbraco-cms/backoffice/external/lit\";\nimport {UmbModalBaseElement} from \"@umbraco-cms/backoffice/modal\";\nimport {MemberImpersonationModalData, MemberImpersonationModalValue} from \"./modal-token\";\nimport {ROOT_CONTEXT} from \"../context/root-context.ts\";\nimport {UmbChangeEvent} from \"@umbraco-cms/backoffice/event\";\nimport {MapRootDomainsToOptions} from \"./modal-helpers.ts\";\nimport {UUISelectOption} from \"../types/types.ts\";\n\n@customElement('member-custom-modal')\nexport class MemberCustomModalElement extends UmbModalBaseElement<MemberImpersonationModalData, MemberImpersonationModalValue> {\n  @state()\n  content: string = '';\n  @state()\n  selected: string = '';\n  #rootContext?: typeof ROOT_CONTEXT.TYPE;\n  private rootItems: UUISelectOption[] = [];\n\n  constructor() {\n    super();\n    this.consumeContext(ROOT_CONTEXT, (context) => {\n      this.#rootContext = context;\n      this.observe(this.#rootContext?.rootItems, (items) => {\n        if (items) {\n          const mapped = MapRootDomainsToOptions(items);\n          this.rootItems = mapped;\n          this.selected = mapped.find(item => item.selected)?.value ?? '';\n        }\n      })\n    })\n  }\n\n  connectedCallback(): void {\n    super.connectedCallback();\n  }\n\n  render() {\n    return html`\n      <umb-body-layout headline=${this.data?.headline ?? 'Custom dialog'}>\n        <uui-box>\n          <h3>${this.data?.content}</h3>\n          <uui-select\n            @change=${this.#selectChange}\n            id=\"select\"\n            label=\"Select destination\"\n            .options=${this.rootItems}\n          >\n          </uui-select>\n          <uui-button\n            id=\"submit\"\n            color='positive'\n            look=\"primary\"\n            label=\"Impersonate\"\n            @click=${this.#handleConfirm}></uui-button>\n        </uui-box>\n        <div slot=\"actions\">\n          <uui-button id=\"cancel\" label=\"Cancel\" @click=\"${this.#handleCancel}\">Cancel</uui-button>\n        </div>\n      </umb-body-layout>\n    `;\n  }\n\n  #selectChange(event: UmbChangeEvent & { target: HTMLSelectElement }) {\n    this.selected = event.target?.value;\n  }\n\n  #handleConfirm() {\n    this.modalContext?.setValue({content: this.content, page: this.selected});\n    this.modalContext?.submit();\n  }\n\n  #handleCancel() {\n    this.modalContext?.reject();\n  }\n}\n\nexport default MemberCustomModalElement;\n"],"names":["MapRootDomainsToOptions","items","selectOptions","item","documentName","_a","_b","domain","_rootContext","_MemberCustomModalElement_instances","selectChange_fn","handleConfirm_fn","handleCancel_fn","MemberCustomModalElement","UmbModalBaseElement","__privateAdd","ROOT_CONTEXT","context","__privateSet","__privateGet","mapped","html","__privateMethod","event","__decorateClass","state","customElement","MemberCustomModalElement$1"],"mappings":";;;AAEO,SAASA,EAAwBC,GAAyC;;AAC/E,QAAMC,IAAmC,CAAA;AACzC,aAAWC,KAAQF,GAAO;AACxB,UAAMG,KAAeC,IAAAF,EAAK,SAAS,CAAC,MAAf,gBAAAE,EAAkB;AACvC,QAAI,GAACC,IAAAH,EAAK,YAAL,QAAAG,EAAc,YAAWH,EAAK,QAAQ,QAAQ,UAAU;AAC3D,MAAAD,EAAc,KAAK,EAAC,MAAME,GAAc,OAAO,KAAK,UAAU,IAAM;AAAA;AAEpE,iBAAWG,KAAUJ,EAAK,QAAQ;AAChC,QAAAD,EAAc,KAAK,EAAC,MAAMK,EAAO,YAAY,OAAOA,EAAO,YAAY,UAAU,IAAO,OAAOH,EAAA,CAAa;AAAA,EAEhH;AAEF,SAAIF,EAAc,CAAC,MACjBA,EAAc,CAAC,EAAE,WAAW,KAGvBA;AACT;;;;;;;wXCnBAM,GAAAC,GAAAC,GAAAC,GAAAC;AASO,IAAMC,IAAN,cAAuCC,EAAiF;AAAA,EAQ7H,cAAc;AACZ,UAAA,GATGC,EAAA,MAAAN,CAAA,GAEL,KAAA,UAAkB,IAElB,KAAA,WAAmB,IACnBM,EAAA,MAAAP,CAAA,GACA,KAAQ,YAA+B,CAAA,GAIrC,KAAK,eAAeQ,GAAc,CAACC,MAAY;;AAC7C,MAAAC,EAAA,MAAKV,GAAeS,CAAA,GACpB,KAAK,SAAQZ,IAAAc,EAAA,MAAKX,CAAA,MAAL,gBAAAH,EAAmB,WAAW,CAACJ,MAAU;;AACpD,YAAIA,GAAO;AACT,gBAAMmB,IAASpB,EAAwBC,CAAK;AAC5C,eAAK,YAAYmB,GACjB,KAAK,aAAWf,IAAAe,EAAO,KAAK,OAAQjB,EAAK,QAAQ,MAAjC,gBAAAE,EAAoC,UAAS;AAAA,QAAA;AAAA,MAC/D,CACD;AAAA,IAAA,CACF;AAAA,EAAA;AAAA,EAGH,oBAA0B;AACxB,UAAM,kBAAA;AAAA,EAAkB;AAAA,EAG1B,SAAS;;AACP,WAAOgB;AAAA,oCACuBhB,IAAA,KAAK,SAAL,gBAAAA,EAAW,aAAY,eAAe;AAAA;AAAA,iBAExDC,IAAA,KAAK,SAAL,gBAAAA,EAAW,OAAO;AAAA;AAAA,sBAEZgB,QAAKb,GAAAC,CAAA,CAAa;AAAA;AAAA;AAAA,uBAGjB,KAAK,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAQhBY,QAAKb,GAAAE,CAAA,CAAc;AAAA;AAAA;AAAA,2DAGmBW,QAAKb,GAAAG,CAAA,CAAa;AAAA;AAAA;AAAA;AAAA,EAAA;AAkB7E;AA3DEJ,IAAA,oBAAA,QAAA;AALKC,IAAA,oBAAA,QAAA;AAoDLC,IAAa,SAACa,GAAuD;;AACnE,OAAK,YAAWlB,IAAAkB,EAAM,WAAN,gBAAAlB,EAAc;AAChC;AAEAM,IAAc,WAAG;;AACf,GAAAN,IAAA,KAAK,iBAAL,QAAAA,EAAmB,SAAS,EAAC,SAAS,KAAK,SAAS,MAAM,KAAK,cAC/DC,IAAA,KAAK,iBAAL,QAAAA,EAAmB;AACrB;AAEAM,IAAa,WAAG;;AACd,GAAAP,IAAA,KAAK,iBAAL,QAAAA,EAAmB;AACrB;AA7DAmB,EAAA;AAAA,EADCC,EAAA;AAAM,GADIZ,EAEX,WAAA,WAAA,CAAA;AAEAW,EAAA;AAAA,EADCC,EAAA;AAAM,GAHIZ,EAIX,WAAA,YAAA,CAAA;AAJWA,IAANW,EAAA;AAAA,EADNE,EAAc,qBAAqB;AAAA,GACvBb,CAAA;AAkEb,MAAAc,IAAed;"}