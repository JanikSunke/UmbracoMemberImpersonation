{"version":3,"file":"modal-element-DjswBof1.js","sources":["../../../Client/src/modals/modal-element.ts"],"sourcesContent":["import {customElement, html, state} from \"@umbraco-cms/backoffice/external/lit\";\nimport {UmbModalBaseElement} from \"@umbraco-cms/backoffice/modal\";\nimport {MemberImpersonationModalData, MemberImpersonationModalValue} from \"./modal-token\";\nimport {ROOT_CONTEXT} from \"../context/root-context.ts\";\nimport {DocumentTreeItemResponseModel} from \"@umbraco-cms/backoffice/external/backend-api\";\nimport {UmbChangeEvent} from \"@umbraco-cms/backoffice/event\";\n\n@customElement('member-custom-modal')\nexport class MemberCustomModalElement extends UmbModalBaseElement<MemberImpersonationModalData, MemberImpersonationModalValue> {\n  @state()\n  content: string = '';\n  @state()\n  selected: string = '';\n  #rootContext?: typeof ROOT_CONTEXT.TYPE;\n  private rootItems: DocumentTreeItemResponseModel[] = [];\n\n  constructor() {\n    super();\n    this.consumeContext(ROOT_CONTEXT, (context) => {\n      this.#rootContext = context;\n      this.observe(this.#rootContext.rootItems, (items) => {\n        this.rootItems = items;\n        this.selected = items[0]?.id ?? '';\n      })\n    })\n  }\n\n  connectedCallback(): void {\n    super.connectedCallback();\n  }\n\n  render() {\n    const selectOptions = this.rootItems.map(item => ({name: item.variants[0]?.name, value: item.id, selected: false}));\n\n    if (selectOptions[0] != undefined) {\n      selectOptions[0].selected = true;\n    }\n\n    return html`\n      <umb-body-layout headline=${this.data?.headline ?? 'Custom dialog'}>\n        <uui-box>\n          <h3>${this.data?.content}</h3>\n        </uui-box>\n        <uui-box>\n          <uui-select\n            @change=${this.#selectChange}\n            id=\"select\"\n            label=\"Select destination\"\n            .options=${selectOptions}\n          >\n          </uui-select>\n        </uui-box>\n        <uui-box>\n          <uui-button\n            id=\"submit\"\n            color='positive'\n            look=\"primary\"\n            label=\"Impersonate\"\n            @click=${this.#handleConfirm}></uui-button>\n        </uui-box>\n        <div slot=\"actions\">\n          <uui-button id=\"cancel\" label=\"Cancel\" @click=\"${this.#handleCancel}\">Cancel</uui-button>\n        </div>\n      </umb-body-layout>\n    `;\n  }\n\n  #selectChange(event: UmbChangeEvent & { target: HTMLSelectElement }) {\n    this.selected = event.target?.value;\n  }\n\n  #handleConfirm() {\n    this.modalContext?.setValue({content: this.content, page: this.selected});\n    this.modalContext?.submit();\n  }\n\n  #handleCancel() {\n    this.modalContext?.reject();\n  }\n}\n\nexport default MemberCustomModalElement;\n"],"names":["_rootContext","_MemberCustomModalElement_instances","selectChange_fn","handleConfirm_fn","handleCancel_fn","MemberCustomModalElement","UmbModalBaseElement","__privateAdd","ROOT_CONTEXT","context","__privateSet","__privateGet","items","_a","selectOptions","item","html","_b","__privateMethod","event","__decorateClass","state","customElement","MemberCustomModalElement$1"],"mappings":";;;;;;;;;wYAAAA,GAAAC,GAAAC,GAAAC,GAAAC;AAQO,IAAMC,IAAN,cAAuCC,EAAiF;AAAA,EAQ7H,cAAc;AACZ,UAAA,GATGC,EAAA,MAAAN,CAAA,GAEL,KAAA,UAAkB,IAElB,KAAA,WAAmB,IACnBM,EAAA,MAAAP,CAAA,GACA,KAAQ,YAA6C,CAAA,GAInD,KAAK,eAAeQ,GAAc,CAACC,MAAY;AAC7C,MAAAC,EAAA,MAAKV,GAAeS,CAAA,GACpB,KAAK,QAAQE,EAAA,MAAKX,CAAA,EAAa,WAAW,CAACY,MAAU;;AACnD,aAAK,YAAYA,GACjB,KAAK,aAAWC,IAAAD,EAAM,CAAC,MAAP,gBAAAC,EAAU,OAAM;AAAA,MAAA,CACjC;AAAA,IAAA,CACF;AAAA,EAAA;AAAA,EAGH,oBAA0B;AACxB,UAAM,kBAAA;AAAA,EAAkB;AAAA,EAG1B,SAAS;;AACP,UAAMC,IAAgB,KAAK,UAAU,IAAI,CAAAC,MAAA;;AAAS,eAAC,OAAMF,IAAAE,EAAK,SAAS,CAAC,MAAf,gBAAAF,EAAkB,MAAM,OAAOE,EAAK,IAAI,UAAU;KAAO;AAElH,WAAID,EAAc,CAAC,KAAK,SACtBA,EAAc,CAAC,EAAE,WAAW,KAGvBE;AAAA,oCACuBH,IAAA,KAAK,SAAL,gBAAAA,EAAW,aAAY,eAAe;AAAA;AAAA,iBAExDI,IAAA,KAAK,SAAL,gBAAAA,EAAW,OAAO;AAAA;AAAA;AAAA;AAAA,sBAIZC,QAAKjB,GAAAC,CAAA,CAAa;AAAA;AAAA;AAAA,uBAGjBY,CAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAUfI,QAAKjB,GAAAE,CAAA,CAAc;AAAA;AAAA;AAAA,2DAGmBe,QAAKjB,GAAAG,CAAA,CAAa;AAAA;AAAA;AAAA;AAAA,EAAA;AAkB7E;AAlEEJ,IAAA,oBAAA,QAAA;AALKC,IAAA,oBAAA,QAAA;AA2DLC,IAAa,SAACiB,GAAuD;;AACnE,OAAK,YAAWN,IAAAM,EAAM,WAAN,gBAAAN,EAAc;AAChC;AAEAV,IAAc,WAAG;;AACf,GAAAU,IAAA,KAAK,iBAAL,QAAAA,EAAmB,SAAS,EAAC,SAAS,KAAK,SAAS,MAAM,KAAK,cAC/DI,IAAA,KAAK,iBAAL,QAAAA,EAAmB;AACrB;AAEAb,IAAa,WAAG;;AACd,GAAAS,IAAA,KAAK,iBAAL,QAAAA,EAAmB;AACrB;AApEAO,EAAA;AAAA,EADCC,EAAA;AAAM,GADIhB,EAEX,WAAA,WAAA,CAAA;AAEAe,EAAA;AAAA,EADCC,EAAA;AAAM,GAHIhB,EAIX,WAAA,YAAA,CAAA;AAJWA,IAANe,EAAA;AAAA,EADNE,EAAc,qBAAqB;AAAA,GACvBjB,CAAA;AAyEb,MAAAkB,IAAelB;"}