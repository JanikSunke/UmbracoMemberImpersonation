{"version":3,"file":"modal-element-DfkEIjrp.js","sources":["../../../Client/src/modals/modal-helpers.ts","../../../Client/src/modals/modal-element.ts"],"sourcesContent":["import {RootDomains} from \"../types/types.ts\";\n\nexport function MapRootDomainsToOptions(items: RootDomains[]) {\n  const selectOptions = [];\n  for (const item of items) {\n    const documentName = item.variants[0]?.name;\n    if (!item.domains?.domains || item.domains.domains.length == 0) {\n      selectOptions.push({name: documentName, value: '/', selected: false});\n    } else {\n      for (const domain of item.domains.domains) {\n        selectOptions.push({name: domain.domainName, value: domain.domainName, selected: false, group: documentName});\n      }\n    }\n  }\n  return selectOptions;\n}\n","import {customElement, html, state} from \"@umbraco-cms/backoffice/external/lit\";\nimport {UmbModalBaseElement} from \"@umbraco-cms/backoffice/modal\";\nimport {MemberImpersonationModalData, MemberImpersonationModalValue} from \"./modal-token\";\nimport {ROOT_CONTEXT} from \"../context/root-context.ts\";\nimport {UmbChangeEvent} from \"@umbraco-cms/backoffice/event\";\nimport {MapRootDomainsToOptions} from \"./modal-helpers.ts\";\n\n@customElement('member-custom-modal')\nexport class MemberCustomModalElement extends UmbModalBaseElement<MemberImpersonationModalData, MemberImpersonationModalValue> {\n  @state()\n  content: string = '';\n  @state()\n  selected: string = '';\n  #rootContext?: typeof ROOT_CONTEXT.TYPE;\n  private rootItems: {\n    name: string;\n    value: string;\n    group?: string;\n    selected?: boolean;\n    disabled?: boolean;\n  }[] = [];\n\n  constructor() {\n    super();\n    this.consumeContext(ROOT_CONTEXT, (context) => {\n      this.#rootContext = context;\n      this.observe(this.#rootContext?.rootItems, (items) => {\n        if (items) {\n          this.rootItems = MapRootDomainsToOptions(items);\n          this.selected = items[0]?.id ?? '';\n        }\n      })\n    })\n  }\n\n  connectedCallback(): void {\n    super.connectedCallback();\n  }\n\n  render() {\n    return html`\n      <umb-body-layout headline=${this.data?.headline ?? 'Custom dialog'}>\n        <uui-box>\n          <h3>${this.data?.content}</h3>\n          <uui-select\n            @change=${this.#selectChange}\n            id=\"select\"\n            label=\"Select destination\"\n            .options=${this.rootItems}\n          >\n          </uui-select>\n          <uui-button\n            id=\"submit\"\n            color='positive'\n            look=\"primary\"\n            label=\"Impersonate\"\n            @click=${this.#handleConfirm}></uui-button>\n        </uui-box>\n        <div slot=\"actions\">\n          <uui-button id=\"cancel\" label=\"Cancel\" @click=\"${this.#handleCancel}\">Cancel</uui-button>\n        </div>\n      </umb-body-layout>\n    `;\n  }\n\n  #selectChange(event: UmbChangeEvent & { target: HTMLSelectElement }) {\n    this.selected = event.target?.value;\n  }\n\n  #handleConfirm() {\n    this.modalContext?.setValue({content: this.content, page: this.selected});\n    this.modalContext?.submit();\n  }\n\n  #handleCancel() {\n    this.modalContext?.reject();\n  }\n}\n\nexport default MemberCustomModalElement;\n"],"names":["MapRootDomainsToOptions","items","selectOptions","item","documentName","_a","_b","domain","_rootContext","_MemberCustomModalElement_instances","selectChange_fn","handleConfirm_fn","handleCancel_fn","MemberCustomModalElement","UmbModalBaseElement","__privateAdd","ROOT_CONTEXT","context","__privateSet","__privateGet","html","__privateMethod","event","__decorateClass","state","customElement","MemberCustomModalElement$1"],"mappings":";;;AAEO,SAASA,EAAwBC,GAAsB;;AAC5D,QAAMC,IAAgB,CAAA;AACtB,aAAWC,KAAQF,GAAO;AACxB,UAAMG,KAAeC,IAAAF,EAAK,SAAS,CAAC,MAAf,gBAAAE,EAAkB;AACvC,QAAI,GAACC,IAAAH,EAAK,YAAL,QAAAG,EAAc,YAAWH,EAAK,QAAQ,QAAQ,UAAU;AAC3D,MAAAD,EAAc,KAAK,EAAC,MAAME,GAAc,OAAO,KAAK,UAAU,IAAM;AAAA;AAEpE,iBAAWG,KAAUJ,EAAK,QAAQ;AAChC,QAAAD,EAAc,KAAK,EAAC,MAAMK,EAAO,YAAY,OAAOA,EAAO,YAAY,UAAU,IAAO,OAAOH,EAAA,CAAa;AAAA,EAEhH;AAEF,SAAOF;AACT;;;;;;;wXCfAM,GAAAC,GAAAC,GAAAC,GAAAC;AAQO,IAAMC,IAAN,cAAuCC,EAAiF;AAAA,EAc7H,cAAc;AACZ,UAAA,GAfGC,EAAA,MAAAN,CAAA,GAEL,KAAA,UAAkB,IAElB,KAAA,WAAmB,IACnBM,EAAA,MAAAP,CAAA,GACA,KAAQ,YAMF,CAAA,GAIJ,KAAK,eAAeQ,GAAc,CAACC,MAAY;;AAC7C,MAAAC,EAAA,MAAKV,GAAeS,CAAA,GACpB,KAAK,SAAQZ,IAAAc,EAAA,MAAKX,CAAA,MAAL,gBAAAH,EAAmB,WAAW,CAACJ,MAAU;;AACpD,QAAIA,MACF,KAAK,YAAYD,EAAwBC,CAAK,GAC9C,KAAK,aAAWI,IAAAJ,EAAM,CAAC,MAAP,gBAAAI,EAAU,OAAM;AAAA,MAClC,CACD;AAAA,IAAA,CACF;AAAA,EAAA;AAAA,EAGH,oBAA0B;AACxB,UAAM,kBAAA;AAAA,EAAkB;AAAA,EAG1B,SAAS;;AACP,WAAOe;AAAA,oCACuBf,IAAA,KAAK,SAAL,gBAAAA,EAAW,aAAY,eAAe;AAAA;AAAA,iBAExDC,IAAA,KAAK,SAAL,gBAAAA,EAAW,OAAO;AAAA;AAAA,sBAEZe,QAAKZ,GAAAC,CAAA,CAAa;AAAA;AAAA;AAAA,uBAGjB,KAAK,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAQhBW,QAAKZ,GAAAE,CAAA,CAAc;AAAA;AAAA;AAAA,2DAGmBU,QAAKZ,GAAAG,CAAA,CAAa;AAAA;AAAA;AAAA;AAAA,EAAA;AAkB7E;AAhEEJ,IAAA,oBAAA,QAAA;AALKC,IAAA,oBAAA,QAAA;AAyDLC,IAAa,SAACY,GAAuD;;AACnE,OAAK,YAAWjB,IAAAiB,EAAM,WAAN,gBAAAjB,EAAc;AAChC;AAEAM,IAAc,WAAG;;AACf,GAAAN,IAAA,KAAK,iBAAL,QAAAA,EAAmB,SAAS,EAAC,SAAS,KAAK,SAAS,MAAM,KAAK,cAC/DC,IAAA,KAAK,iBAAL,QAAAA,EAAmB;AACrB;AAEAM,IAAa,WAAG;;AACd,GAAAP,IAAA,KAAK,iBAAL,QAAAA,EAAmB;AACrB;AAlEAkB,EAAA;AAAA,EADCC,EAAA;AAAM,GADIX,EAEX,WAAA,WAAA,CAAA;AAEAU,EAAA;AAAA,EADCC,EAAA;AAAM,GAHIX,EAIX,WAAA,YAAA,CAAA;AAJWA,IAANU,EAAA;AAAA,EADNE,EAAc,qBAAqB;AAAA,GACvBZ,CAAA;AAuEb,MAAAa,IAAeb;"}