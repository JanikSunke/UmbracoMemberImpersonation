import {css, html, LitElement, TemplateResult} from 'lit';
import {customElement, state} from 'lit/decorators.js';
import {createRef} from 'lit/directives/ref.js';
import {UmbActModal} from "./umb-act-modal";

@customElement('umb-act-toggle')
export class UmbActToggle extends LitElement {
  static styles = css`
    :host {
      position: absolute;
      bottom: 1.00rem;
      left: 1.00rem;
    }
  `;

  @state()
  private _modals: TemplateResult<1>[] = [];

  private icons = {
    'person': `
       <svg viewBox="0 0 512 512">
         <path fill="currentColor"
               d="M182.8 19.5C166.4 25.7 154.3 44 141.9 81c-4 11.9-10.6 35.8-13.3 48.2l-.6 2.6-14.7.4c-12.6.2-15.3.6-18.2 2.3-10 5.9-10.6 18.9-1.2 25.2 3.2 2.2 4.4 2.3 20.7 2.3H132v23.7c0 13.1.3 24.7.5 25.8.5 1.7-8.1 7-63.7 39.6-57.8 33.8-64.5 38-66.5 41.5-2.8 4.8-2.9 9.3-.3 14.4 3.5 6.9 5.8 7.5 38.5 10.1 16 1.2 29.2 2.4 29.4 2.6.2.1-3.4 4.2-8 9C27.7 364.2 6 411.1 1 459.9c-1.5 15-1.3 22 .8 26.1 2.5 5 7.5 8 13.2 8 9.2 0 15-6.7 15-17.3 0-3.2.5-10.1 1.1-15.5 4.5-41.7 22.8-80.5 52.8-112.2 9.3-9.9 8.6-11.5 6.7 14.9-1.4 19-1.1 22.7 2.2 26.8 1.5 1.9 149.4 98.3 156.4 101.9 3.5 1.8 10.1 1.8 13.6 0 7-3.6 154.9-100 156.4-101.9 3.3-4.1 3.6-7.8 2.2-26.8-1.9-26.4-2.6-24.8 6.8-14.9 25.3 26.7 42.3 58.4 49.6 93 2.4 10.8 4.2 26.2 4.2 34.7 0 3.5.7 7.2 1.8 9.3 5.3 10.7 21.1 10.7 26.4 0 2.1-4.1 2.3-11.1.8-26.1-5-48.8-26.1-94.6-60.5-130.7-4.7-4.9-8.5-9.2-8.5-9.4 0-.3 4.4-.8 9.8-1.2 5.3-.3 18.5-1.4 29.2-2.2 22.4-1.9 25.7-3 29-9.4 2.6-5.1 2.5-9.5-.3-14.4-2-3.5-8.1-7.4-60.7-38.3-32.2-18.9-61.1-35.8-64.3-37.6-4.7-2.6-5.7-3.6-5.3-5.2.3-1.1.6-12.7.6-25.8V162h17c13.1 0 17.8-.3 20-1.5 8.4-4.3 10.4-15.3 4.3-22.6-3.9-4.6-6.4-5.2-22.7-5.8l-14.9-.6-4.4-16.5c-6.1-23.2-10.5-36.9-16.9-52.8-9.5-23.7-17.4-34.6-29.3-40.5-5.8-2.8-7.5-3.2-14.6-3.2-9.6.1-15 2.3-31.4 13-14.4 9.3-20 11.7-28.7 12.3-11.1.7-17-1.7-35.4-14.3-12.9-8.8-17.9-10.8-28-11.2-5.6-.2-9.8.2-12.2 1.2zM208 55.6C228.1 69.2 240.8 74 256 74c15.7 0 28.1-4.6 48.4-17.9 16.3-10.6 17.4-10.3 25.7 7.4 4.2 9 16 43.5 20.3 59.2l2.5 9.3h-97c-68.3 0-96.9-.3-96.9-1.1 0-2.5 6.4-30 9-38.9 5.3-17.7 12-31.2 20-40.3 4.7-5.4 6.7-5 20 3.9zM349.8 184c.4 31-1.5 42.5-10 59.5-17.2 34.9-54.5 55.4-93.4 51.4-42.8-4.4-77.4-37.8-83.3-80.4-1.2-8.3-1.5-50.7-.4-51.8.3-.4 42.5-.6 93.7-.5l93.1.3.3 21.5zM176.9 343.4c23.7 51.6 43 94 42.8 94.2-.2.3-98.2-62.7-99.4-63.9-.2-.3.6-13.4 1.7-29.2 2.8-40.3 2.8-41.6-1.2-46.1-1.7-2-4.3-4-5.7-4.5-1.3-.6-13.2-1.9-26.5-3-13.2-1.1-24.1-2.1-24.2-2.2-.5-.5 68.2-40.3 68.7-39.8.3.3 20 42.8 43.8 94.5zm262.6-59.7c5 2.9 8.6 5.3 8 5.3-6.7.1-48.8 4.2-50.6 4.9-1.4.5-4 2.5-5.7 4.5-4 4.5-4 5.8-1.2 46.1 1.1 15.8 1.9 29 1.6 29.2-1.3 1.3-99.1 64.2-99.3 63.9-.2-.2 18.4-41 41.3-90.7s42.5-92.3 43.5-94.6l1.9-4.2 25.8 15.1c14.1 8.4 29.8 17.5 34.7 20.5zm-224.7 34.7c30.1 10.8 67.2 8.7 95.4-5.5l7.7-3.9-3.3 7.3C285.1 380.8 256.6 442 256 442c-.6 0-31-65.2-58.6-125.7l-3.3-7.3 6.7 3.4c3.7 1.8 10 4.5 14 6z"/>
         <path fill="currentColor" transform="scale(0.6) translate(170, 100)"
               d="M89.5 174.6c-1.6.2-7.7.9-13.5 1.5-20.4 2.1-55 9.8-60.7 13.5-2.2 1.4-2.3 1.9-2.3 18.4 0 18.9-.1 18.5 7.3 21.4 2.5.9 4.8 2.5 5.2 3.4.3.9 1 9.1 1.5 18.2 2 35.3 8.2 55.3 21.4 68.4 7.3 7.3 13.3 10.6 24.6 13.9 11.5 3.3 25.4 4.7 48 4.7 31.7 0 50.3-3.5 69.9-13.1 13.6-6.7 24.8-17.3 30.5-28.9 3.7-7.6 11.4-34 14.1-48.5 1.2-6.6 2-8.5 4.5-10.8 3-2.6 3.3-2.7 15.1-2.7 16.6 0 19.6 1.8 21.3 13 1.6 10.1 10.8 41.9 14.2 48.6 11 22.2 35.6 36.4 70.8 41 13.8 1.8 55.2 1.5 66.6-.6 22.9-4 36.9-13.7 45.5-31.5 6.9-14.2 9.8-28.3 11.5-55 .4-8.3 1.2-15.8 1.5-16.7.4-.9 2.7-2.5 5.1-3.4 7-2.7 7.4-3.7 7.4-20.9 0-11.9-.3-15.5-1.5-17.2-1.9-2.7-10.5-5.4-29.5-9.4-60-12.5-119.2-9.5-175 8.7l-11.5 3.8-23.5.3c-26 .4-23.4.8-50.7-7.5-14.7-4.6-32.1-8.3-49.3-10.8-10.8-1.5-60.8-2.8-68.5-1.8z"/>
       </svg>
    `,
    'logout': `
          <svg viewBox="0 0 512 512">
            <path fill="currentColor"
              d="M48.2 3C30.4 7.7 15 20.1 7.1 36.1-.5 51.5 0 35.9 0 256c0 169.6.2 198.5 1.5 204.5C6.4 483.7 25.1 503 48.6 509c7.4 1.9 11.5 2 109.4 2h101.6l5.1-2.5c7.2-3.6 10.6-9 11.1-17.5.4-8.1-2.3-14-8.7-18.5l-4.3-3-102.1-.5-102.2-.5-4-2.2c-5-2.7-8-5.8-10-10.5-1.3-3.3-1.5-25.1-1.5-199.8 0-174.7.2-196.5 1.5-199.8 2-4.7 5-7.8 10-10.5l4-2.2 102.2-.5 102.1-.5 4.3-3c6.4-4.5 9.1-10.4 8.7-18.5-.5-8.5-3.9-13.9-11.1-17.5L259.6 1l-102 .1C60.4 1.1 55.1 1.2 48.2 3z"/>
            <path fill="currentColor"
              d="M355.6 108c-13.5 4.3-19.6 20.6-11.8 31.7 1.5 2.1 23.2 24 48.2 48.8 25 24.7 45.7 45.3 45.8 45.7.2.5-56.3.8-125.5.8H186.4l-4.4 2.2c-5.5 2.9-9.5 7.9-11.2 14-2.4 9.1 2.4 19 11.2 23.5l4.4 2.3h125.9c69.2 0 125.7.3 125.5.8-.1.4-20.8 21-45.8 45.7-25 24.8-46.7 46.7-48.2 48.8-12.1 17.2 8.5 39.9 27.5 30 4-2 136.3-132.7 138.5-136.8 2.2-4 2.2-15 0-19-2.2-4.2-134.5-134.8-138.6-136.9-4-2.1-11.7-2.9-15.6-1.6z"/>
          </svg>
    `
  };

  constructor() {
    super();
  }

  handleClick() {
    const modalRef = createRef<UmbActModal>();

    this._modals.push(html`
      <umb-act-modal ref=${modalRef}/>
    `);

    this.requestUpdate('_modals');
  }

  render() {
    return html`
      <uui-action-bar>
        <uui-button @click=${this.handleClick} label="impersonate" pristine="" look="primary">
          <uui-icon-registry .icons="${this.icons}">
            <uui-icon style="font-size: 20px; padding-left: 4px; padding-right: 4px;" name="person"></uui-icon>
          </uui-icon-registry>
        </uui-button>
      </uui-action-bar>
      ${this._modals}
    `;
  }
}
